version: "3.1"

intents:
  - greet
  - affirm
  - deny
  - inform
  - correct_data

entities:
  - chronic_disease
  - smoking_info

slots:
  chronic_disease:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: medical_history_form
            requested_slot: chronic_disease

  smoking_info:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: medical_history_form
            requested_slot: smoking_info

forms:
  medical_history_form:
    required_slots:
      - chronic_disease
      - smoking_info

responses:
  utter_intro:
    - text: |
        Hello, I am here to help you do your medical history. If you type something wrong you will have a chance to fix it at the end.

  utter_ask_chronic_disease:
    - text: "1) Do you have any chronic disease?"

  utter_ask_smoking_info:
    - text: "2) Do you smoke? If yes, how many cigarettes a day?"

  utter_summary:
    - text: |
        Here's what I've collected:
        Chronic Disease: {chronic_disease}
        Smoking Info: {smoking_info}
        Do you want to change anything? (yes/no)

  utter_goodbye:
    - text: "Thank you! Your medical history has been recorded."

  utter_ask_which_to_change:
    - text: "Which one do you want to change? Type 1 for 'chronic disease' or 2 for 'smoking'?"

actions:
  - action_summary
  - action_correct_slot
